\chapter{Requirements} \label{ch:requirements}
This chapter will post the requirements for the system described in \autoref{ch:overview}.  

As described in \autoref{sec:problem_statement} the coil must not hit the backplate because this damages the loudspeaker significantly. To be able to secure this, the system must run in real time which is explained in \autoref{sec:RealTime}. However the delay of the full system must not be larger than 100 ms which is a delay a normal modern television today is able to delay the video with. This means that the system is not applicable with e.g. live music where the sound should not be delayed by more than maximum 20 ms, but only applicable with delayed video and normal audio listening. This leads to the following requirements for the overall system.

\begin{itemize}
\item Overall system
\begin{enumerate}
\item [\textlabel{1}{coil}] The coil must not hit the backplate.\\
\item [\textlabel{2}{realtime}] The system must run in real time. \\
\item [\textlabel{3}{delay}] The system must not have a delay bigger than 100 ms.
\end{enumerate}
\end{itemize}

The processor has been chosen to be a DSP as explained in \autoref{sec:platformReq}. This section also explains all the requirements for the platform regarding, 96 kHz sample rate, 24 bit resolution, SNR of 120 dB, 100 MIPS and infacing through $I^2S$ to an ADC and DAC. However these demands would be considered necessary for a finish product but because of time constraints and the complexity of a system meeting theese requirements, the demands have been scaled to 48 kHz sample rate, 16 bit resolution, SNR of \textbf{XX} while maintaining infacing through $I^2S$ to an ADC and DAC. 

The hardware must also be able to meet the specifications of IEC 60268-15 which concerns specifications for an Hi-fi system which leads to the following requirements for the hardware platform.

\begin{itemize}
\item Hardware platform
\begin{enumerate}
\item [\textlabel{4}{samplerate44}] The sample rate of the audio codec must be at least 44.1 kHz.\\
\item [\textlabel{5}{samplerate96}] The sample rate of the audio codec must be compatible with 96 kHz.\\
\item [\textlabel{6}{resolution}]  A bit resolution of 24 bit must supported by the audio codec and the DSP.\\
\item [\textlabel{7}{I2S}] The DSP must have at least two I2S ports for interfacing with audio codec.\\
%\item [\textlabel{8}{MIPS}] The DSP must have at least 100 MIPS available.\todo{hmmmmmm den her vil sofus ikke kunne lide}\\
\item [\textlabel{8}{IEC}] The interface must comply with IEC 60268-15 standard.
\end{enumerate}
\end{itemize}

%The RMS compressor must have four bands which comply with the class 2 of IEC 6964 standard (2001) which descibed in \autoref{app:IEC6964}, the reason for class 2 is that it has the biggest tolerances for the filters which should be designed. These bands must be placed below 500 Hz which was desired by DALI which can me seen in (\textbf{MAIL correnspondance}) and is explained in (\textbf{Multiband vs single band section}). The system must also distort less than soft clipping which is fomulated in the problem statement seen in \autoref{sec:problem_statement} and argued for in \autoref{sec:PreAnalysisCon}.

The RMS compressor must have a threshold at 150 W determined in \autoref{sec:hit_detect}. The compressor must have 4 bands which was determined by a listening test concerning single-band versus multi-band. These bands must also comply with the specifications of class 2 of IEC 6964. The reasoning for not meeting class 0 or class 1 requirements are because of time constraints, because it would require more tuning of the filters. The compressor shall only apply to frequencies below 500 Hz because frequencies over 500 Hz are not going to damage the loudspeaker by hitting the coil against the backplate. 

Lastly the compressor must distort less than clipping because a limiter could just have been used instead of a compressor if the compressor distorts just as much. This leads to the following requirements for the RMS compressor.     

\begin{itemize}
\item RMS compressor
\begin{enumerate}
\item [\textlabel{9}{Threshold}] The compressor must have a threshold at 150 W.\\
\item [\textlabel{10}{bands}] The compressor must have 4 bands.\\
\item [\textlabel{11}{standardband}] The bands of the compressor must comply with the class 2 of IEC 6964 standard (2001).\\
\item [\textlabel{12}{500below}] The compressor must apply to frequencies below 500 Hz.\\
\item [\textlabel{13}{clipping}] The compressor must distort less than clipping.
\end{enumerate}
\end{itemize}

This conlcudes all the requirements for the system to be designed and implemented, fullfilling the problemstatement. 
%The requirements of this chapter will be the basis for the final system.
%\todo[inline]{REFERENCER I CHAPTER}

% \begin{itemize}
% \item Functionality
% \begin{enumerate}
% \item The coil must not hit the backplate when the system is activated.
% \end{enumerate}
% \end{itemize}

% \begin{itemize}
% \item Overall system
% \begin{enumerate}
% \item The system must be a real time system. 
% \item The system must not have SNR be lower than 120 dB.
% \end{enumerate}
% \end{itemize}

% \begin{itemize}
% \item DSP platform
% \begin{enumerate}
% \item The sample rate of the ADC/DAC must be 96 kHz.
% \item A bit resolution of 24 bit must supported by the ADC/DAC and the DSP.
% \item The DSP must have at least two \gls{I2S} ports for interfacing with ADC/DAC.
% \item The DSP must have at least 1024 instructions pr. sample to support both the system and a limiter build by DALI. 
% \end{enumerate}
% \end{itemize}
% \todo[inline]{Tjek op på om kravet med 1024 er realistisk/"do-able"}
% \todo[inline]{Tjek op på om kravet med 24-bit er realistisk/"do-able"}

% \begin{itemize}
% \item Regulating equalizer
% \begin{enumerate}
% \item The equalizer must be able to regulate between 11 Hz - 100 Hz with a tolerance of $\pm$ 10 Hz. 
% \item The maximum gain of the user controlled equalizer must be minimum $\pm$ 12 dB SPL with a tolerance of $\pm$ 1 dB SPL.
% \item The resolution of the gain must be 1 dB with a tolerance of 0.1 dB.
% \item The regulating part should be designed as a shelf filter.
% \end{enumerate}
% \end{itemize}


% \begin{itemize}
% \item User controlled equalizer
% \begin{enumerate}
% \item There must be \textbf{TBD} n bands in which the equalizer can be controlled with. 
% \item The bands of the equalizer must function between 50 Hz - 15000 Hz with a cut off tolerance of \textbf{TBD}. 
% \item The maximum gain of the user controlled equalizer must be minimum $\pm$ 6 dB with a tolerance of $\pm$ 1 dB.
% \item The resolution of the gain must be 1 dB with a tolerance of 0.1 dB.
% \end{enumerate}
% \end{itemize}

% \begin{itemize}
% \item Interface
% \begin{enumerate}
% \item 
% \end{enumerate}
% \end{itemize}
